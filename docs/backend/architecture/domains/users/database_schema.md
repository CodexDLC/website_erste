[üè† Home](../../../../index.md) > [Backend](../../../index.md) > [Architecture](../../index.md) > [Domains](../index.md) > [Users](./index.md)

# üóÑÔ∏è Database Schema (Users)

## –¢–∞–±–ª–∏—Ü–∞ `users`
–ü—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| **id** | `UUID` (PK) | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: `mapped_column(Uuid, primary_key=True, default=uuid.uuid4)` |
| **email** | `String` (Unique, Index) | –û—Å–Ω–æ–≤–Ω–æ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –≤—Ö–æ–¥–∞. |
| **hashed_password** | `String` | –•–µ—à –ø–∞—Ä–æ–ª—è (Bcrypt). –ù–µ —Ö—Ä–∞–Ω–∏–º —á–∏—Å—Ç—ã–µ –ø–∞—Ä–æ–ª–∏! |
| **is_active** | `Bool` | –§–ª–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (soft delete / ban). Default: `True`. |
| **is_superuser** | `Bool` | –§–ª–∞–≥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞. Default: `False`. |
| **created_at** | `DateTime` | –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏. |
| **updated_at** | `DateTime` | –î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è. |

## –¢–∞–±–ª–∏—Ü–∞ `social_accounts`
–ü—Ä–∏–≤—è–∑–∫–∞ –≤–Ω–µ—à–Ω–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ (OAuth2) –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é. –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ—Ü—Å–µ—Ç–µ–π.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| **id** | `BigInt` (PK) | –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π ID. |
| **user_id** | `UUID` (FK -> users.id) | –í–ª–∞–¥–µ–ª–µ—Ü –∞–∫–∫–∞—É–Ω—Ç–∞. `ON DELETE CASCADE`. |
| **provider** | `String` | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (google, github, discord). |
| **provider_id** | `String` | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–∏—Å—Ç–µ–º–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (sub). |
| **email** | `String` (Optional) | Email, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–¥–ª—è —Å–ø—Ä–∞–≤–∫–∏). |
| **created_at** | `DateTime` | –î–∞—Ç–∞ –ø—Ä–∏–≤—è–∑–∫–∏. |

### –ò–Ω–¥–µ–∫—Å—ã —Ç–∞–±–ª–∏—Ü—ã `social_accounts`:
- `idx_provider_pid` - Unique Index –Ω–∞ –ø–∞—Ä—É `(provider, provider_id)` (–∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π).
- `idx_user_id` - Index –Ω–∞ –ø–æ–ª–µ `user_id` (–±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –≤—Å–µ—Ö —Å–æ—Ü—Å–µ—Ç–µ–π —é–∑–µ—Ä–∞).

## –¢–∞–±–ª–∏—Ü–∞ `refresh_tokens`
–•—Ä–∞–Ω–∏–ª–∏—â–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π (White List). –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è Access Token.

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| **id** | `BigInt` (PK) | –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π ID. |
| **user_id** | `UUID` (FK -> users.id) | –í–ª–∞–¥–µ–ª–µ—Ü —Ç–æ–∫–µ–Ω–∞. `ON DELETE CASCADE`. |
| **token** | `String` (Unique, Index) | –¢–µ–ª–æ refresh-—Ç–æ–∫–µ–Ω–∞. |
| **expires_at** | `DateTime` | –î–∞—Ç–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å—Ä–æ–∫–∞ –¥–µ–π—Å—Ç–≤–∏—è. |
| **created_at** | `DateTime` | –î–∞—Ç–∞ –≤—ã–¥–∞—á–∏. |

### –ò–Ω–¥–µ–∫—Å—ã —Ç–∞–±–ª–∏—Ü—ã `refresh_tokens`:
- `idx_token` - Index –Ω–∞ –ø–æ–ª–µ `token` (–¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞ –ø—Ä–∏ refresh)
- `idx_user_id` - Index –Ω–∞ –ø–æ–ª–µ `user_id` (–¥–ª—è –≤—ã—Ö–æ–¥–∞ —Å–æ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
- `idx_expires_at` - Index –Ω–∞ –ø–æ–ª–µ `expires_at` (–¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –ø—Ä–æ—Ç—É—Ö—à–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤ —Ñ–æ–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–µ–π)

---
[üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é](../../../../index.md)
