[üè† Home](../../../../index.md) > [Backend](../../../index.md) > [Architecture](../../index.md) > [Domains](../index.md) > [Media](./index.md)

# üìú Contracts (Repositories)

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, —Å–∫—Ä—ã–≤–∞—é—â–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é SQL/SQLAlchemy.

## `IMediaRepository`

–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Ä–∞–±–æ—Ç—É —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ `files` –∏ `images`.

### –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏ (CAS)
*   **`get_file_by_hash(hash: str) -> Optional[File]`**
    *   –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ –ë–î. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –Ω–∞ –¥–∏—Å–∫.
*   **`create_file(file_data: dict) -> File`**
    *   –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `files` (—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –±–ª–æ–±).
*   **`delete_file(file_hash: str)`**
    *   –£–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `files`. –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å–±–æ—Ä—â–∏–∫–æ–º –º—É—Å–æ—Ä–∞, –∫–æ–≥–¥–∞ —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ —Ä–∞–≤–µ–Ω 0.
*   **`get_usage_count(file_hash: str) -> int`**
    *   –°—á–∏—Ç–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –≤ `images` —Å—Å—ã–ª–∞—é—Ç—Å—è –Ω–∞ –¥–∞–Ω–Ω—ã–π —Ö–µ—à.

### –†–∞–±–æ—Ç–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ (User Assets)
*   **`create_image(user_id: UUID, file_hash: str, filename: str) -> Image`**
    *   –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `images`, —Å–≤—è–∑—ã–≤–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ñ–∞–π–ª–æ–º.
*   **`get_image_by_id(image_id: UUID) -> Optional[Image]`**
    *   –ü–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞—Ä—Ç–∏–Ω–∫–µ (–≤–ª–∞–¥–µ–ª–µ—Ü, —Ö–µ—à, –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ, –¥–∞—Ç–∞).
*   **`get_public_images(limit: int, offset: int) -> List[Image]`**
    *   –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–∏–Ω–æ–∫ –¥–ª—è –≥–ª–∞–≤–Ω–æ–π –ª–µ–Ω—Ç—ã (Feed).
    *   –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –Ω–æ–≤–∏–∑–Ω–µ (`created_at DESC`).
*   **`delete_image(image_id: UUID)`**
    *   –£–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `images` (–æ—Ç–≤—è–∑—ã–≤–∞–µ—Ç —Ñ–∞–π–ª –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).

---
[üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é](../../../../index.md)
