[üè† Home](../../index.md) > [Management](../index.md) > [Tasks](./index.md)

# üèéÔ∏è Task: Fix Race Condition in Registration

**Status:** üìã Backlog
**Priority:** Low (Rare case)
**Related Tech Debt:** Race Condition in Registration

## üìù –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
–í –º–µ—Ç–æ–¥–µ `AuthService.register_user` —Å–Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è email (`get_by_email`), –∞ –∑–∞—Ç–µ–º —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (`create`).
–ü—Ä–∏ –≤—ã—Å–æ–∫–æ–π –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (–¥–≤–∞ –∑–∞–ø—Ä–æ—Å–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –æ–¥–Ω–∏–º email) –æ–±–∞ –º–æ–≥—É—Ç –ø—Ä–æ–π—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫—É `get_by_email` (–≤–µ—Ä–Ω–µ—Ç None), –∏ –æ–±–∞ –ø–æ–ø—ã—Ç–∞—é—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –û–¥–∏–Ω —É–ø–∞–¥–µ—Ç —Å –æ—à–∏–±–∫–æ–π –ë–î, –Ω–æ –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —ç—Ç–æ–≥–æ –Ω–µ –æ–∂–∏–¥–∞–µ—Ç.

## üéØ –¶–µ–ª—å
–°–¥–µ–ª–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∞—Ç–æ–º–∞—Ä–Ω–æ–π –∏ –Ω–∞–¥–µ–∂–Ω–æ–π.

## üìã –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

1.  –£–±—Ä–∞—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É `get_by_email` –≤ —Å–µ—Ä–≤–∏—Å–µ.
2.  –û–±–µ—Ä–Ω—É—Ç—å –≤—ã–∑–æ–≤ `repo.create` –≤ –±–ª–æ–∫ `try...except IntegrityError`.
3.  –ï—Å–ª–∏ –ø–æ–π–º–∞–Ω–∞ –æ—à–∏–±–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ ‚Äî –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å `BusinessLogicException("User already exists")`.

---
[‚¨ÖÔ∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É –∑–∞–¥–∞—á](./index.md)
